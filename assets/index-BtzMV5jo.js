import{a7 as e,r as i,a8 as O,a9 as q,aa as M,ab as U,ac as z}from"./vendor-Bj5XVNrY.js";import{T as b,B,C as p,A as I,a as u,E as w,R as T,b as m,I as F,S as h,c as P,L as j,d as A,e as k}from"./vendor-antd-BadnX7nP.js";import{d as $,i as J,f as Q,s as V}from"./vendor-icons-v3tP3Ov1.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const Y=({children:t})=>e.jsxs("div",{className:"layout-wrapper",children:[e.jsx("main",{className:"layout-content",children:t}),e.jsx("footer",{className:"layout-footer",children:e.jsx("p",{children:"© 2025 Dang Vo"})})]}),C=i.createContext(null);var l=(t=>(t[t.ADD_TO_CART=0]="ADD_TO_CART",t[t.DELETE_CART=1]="DELETE_CART",t[t.UPDATE_CART=2]="UPDATE_CART",t))(l||{});const{Text:H}=b,K=({product:t})=>{const r=i.useContext(C),{dispatch:a}=r||{},c=()=>{a?.({type:l.ADD_TO_CART,payload:t})};return e.jsx(B.Ribbon,{color:"red",className:O("product-badge-wrapper",{hideBadge:!t.isPrescription}),text:"RX",children:e.jsxs(p,{className:"product-card-wrapper",children:[e.jsx(I,{shape:"square",size:180}),e.jsx(p.Meta,{title:t?.name}),e.jsxs(H,{type:"secondary",children:[t?.price.toLocaleString()," đ"]}),e.jsx("div",{className:"product-card-actions",children:e.jsx(u,{type:"primary",onClick:c,children:e.jsx("strong",{children:"Add to cart"})})})]})})},X=({productsPromise:t})=>{const r=i.use(t);return r.length?e.jsx(T,{gutter:[16,16],children:r.map((a,c)=>e.jsx(m,{xs:24,md:12,lg:12,children:e.jsx(K,{product:a},c)},a.id))}):e.jsx(p,{children:e.jsx(w,{description:"Not Found"})})},G=({...t})=>e.jsx("div",{className:"search-bar-wrapper",children:e.jsx(F.Search,{className:"search-bar--input",placeholder:"Search...",allowClear:!0,size:"large",prefix:e.jsx($,{style:{color:"#bfbfbf"}}),...t})}),W=["Pain Relief","Antibiotic","Supplement","Allergy"],Z=({onFilterCategory:t})=>e.jsxs("div",{className:"category-filter-wrapper",children:[e.jsx("p",{children:"Category"}),e.jsxs(h,{style:{width:200},onChange:t,optionFilterProp:"label",defaultValue:"",children:[e.jsx(h.Option,{value:"",label:"All",children:"All"}),W.map(r=>e.jsx(h.Option,{value:r,label:r,children:r},r))]})]});function ee(t,r){let a=null;return(...c)=>{a&&clearTimeout(a),a=setTimeout(()=>{t(...c)},r)}}const te=()=>{const t=Array.from({length:4});return e.jsx(T,{gutter:[16,16],children:t.map((r,a)=>e.jsx(m,{xs:24,md:12,lg:12,children:e.jsxs(p,{children:[e.jsx(P,{active:!0,paragraph:{rows:2},title:{width:"60%"}}),e.jsx(P.Button,{active:!0,block:!0,style:{marginTop:10}})]})},a))})},E=[{category:"Pain Relief",id:1,isPrescription:!1,name:"Paracetamol 500mg",price:15e3},{category:"Antibiotic",id:2,isPrescription:!0,name:"Amoxicillin 500mg",price:45e3},{category:"Supplement",id:3,isPrescription:!1,name:"Vitamin C 1000mg",price:3e4},{category:"Allergy",id:4,isPrescription:!1,name:"Cetirizine 10mg",price:2e4}],S=800,y={getProducts:async()=>new Promise(t=>{setTimeout(()=>{t(E)},S)}),searchProducts:async({searchTerm:t,categoryFilter:r})=>new Promise(a=>{setTimeout(()=>{const c=E.filter(o=>{const s=o.name.toLowerCase().includes(t.toLowerCase()),n=!r||o.category===r;return s&&n});a(c)},S)})},{Text:f,Title:g}=b,R=99,N=1,re=()=>{const t=i.useContext(C);if(!t)return null;const{cart:r,dispatch:a}=t,c=(s,n)=>{n>R||(n<N&&a({type:l.DELETE_CART,payload:{id:s}}),a({type:l.UPDATE_CART,payload:{id:s,quantity:n}}))},o=s=>{a({type:l.DELETE_CART,payload:{id:s}})};return e.jsxs(p,{className:"product-cart-wrapper",title:e.jsxs(g,{level:4,children:["Cart (",r.items.length," ",r.items.length===1?"product":"products",")"]}),children:[e.jsx(j,{itemLayout:"horizontal",dataSource:r.items,locale:{emptyText:e.jsx(w,{description:"Empty Cart"})},renderItem:s=>e.jsxs(j.Item,{className:"product-cart-actions",actions:[e.jsx(u,{type:"text",danger:!0,icon:e.jsx(V,{}),onClick:()=>o(s.id)})],children:[e.jsx(j.Item.Meta,{avatar:e.jsx(I,{shape:"square",size:64}),title:e.jsx(f,{strong:!0,children:s.name}),description:e.jsxs(A,{direction:"vertical",size:0,children:[e.jsxs(f,{type:"secondary",children:[s.price.toLocaleString()," đ"]}),e.jsxs(A,{style:{marginTop:8},children:[e.jsx(u,{size:"small",icon:e.jsx(J,{}),onClick:()=>c(s.id,s.quantity-1),disabled:s.quantity<=1}),e.jsx(k,{min:N,max:R,size:"small",value:s.quantity,className:"product-cart-quantity-input",controls:!1,onChange:n=>{n&&c(s.id,n)}}),e.jsx(u,{size:"small",icon:e.jsx(Q,{}),onClick:()=>c(s.id,s.quantity+1),disabled:s.quantity>=99})]})]})}),e.jsx("div",{className:"product-cart-price",children:e.jsxs(f,{strong:!0,style:{color:"#f5222d"},children:[(s.price*s.quantity).toLocaleString()," đ"]})})]})}),r.items.length>0&&e.jsxs("div",{className:"product-cart-footer",children:[e.jsxs("div",{className:"product-cart-footer__total",children:[e.jsx(g,{level:4,children:"Total payment:"}),e.jsxs(g,{level:3,className:"product-cart-footer__total--text",children:[r.items.reduce((s,n)=>s+n.price*n.quantity,0).toLocaleString(),"đ"]})]}),e.jsx(u,{type:"primary",size:"large",block:!0,children:e.jsx("strong",{children:"Pay now"})})]})]})},se=500,ae=()=>{const[t,r]=i.useState(""),[a,c]=i.useState(""),[o,s]=i.useState(y.getProducts()),n=i.useMemo(()=>ee(d=>{r(d)},se),[]),L=d=>{n(d.target.value)},D=d=>{c(d)};return i.useEffect(()=>{const d=!t&&!a?y.getProducts():y.searchProducts({searchTerm:t,categoryFilter:a});s(d)},[t,a]),e.jsxs("div",{className:"home-wrapper",children:[e.jsx("h1",{children:"APP"}),e.jsx(Z,{onFilterCategory:D}),e.jsx(G,{onChange:L}),e.jsxs(T,{gutter:16,className:"product-list",children:[e.jsx(m,{xs:24,xl:16,children:e.jsx(i.Suspense,{fallback:e.jsx(te,{}),children:e.jsx(X,{productsPromise:o})})}),e.jsx(m,{xs:24,xl:8,children:e.jsx(re,{})})]})]})},oe=q([{path:"/",element:e.jsx(ae,{})},{path:"*",element:e.jsx(M,{replace:!0,to:"/"})}]),x={items:[]},ce=(t=x,r)=>{switch(r.type){case l.ADD_TO_CART:{const a=t.items.findIndex(o=>o.id===r.payload.id);let c;if(a>-1)c=t.items.map((o,s)=>s===a?{...o,quantity:o.quantity+1}:o);else{const o={...r.payload,quantity:1};c=[...t.items,o]}return{items:c}}case l.DELETE_CART:return{...t,items:t.items.filter(a=>a.id!==r.payload?.id)};case l.UPDATE_CART:return{...t,items:t.items.map(a=>a.id===r.payload?.id?{...a,quantity:r.payload?.quantity}:a)};default:return t}},_="cart",v={get:()=>{const t=localStorage.getItem(_);return JSON.parse(t||JSON.stringify(x))},set:t=>{localStorage.setItem(_,JSON.stringify(t))}},ne=({children:t})=>{const[r,a]=i.useReducer(ce,x,()=>{const c=v.get();return c||x});return i.useEffect(()=>{v.set(r)},[r]),e.jsx(C.Provider,{value:{cart:r,dispatch:a},children:t})};function ie(){return e.jsx(Y,{children:e.jsx(ne,{children:e.jsx(U,{router:oe})})})}z.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(ie,{})}));
